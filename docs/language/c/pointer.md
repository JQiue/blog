---
title: 指针
category: 编程语言
tag: C
author: JQiue
article: false
---

指针简单来说就是一种特殊的变量，和普通变量不同的是，指针变量存储的是另一个变量的地址，而普通变量存储的只是一个实际的值，站在内存的角度来看，通过地址就能访问数据，那么指针也就能间接访问某个变量中的数据

声明指针变量和普通变量一样，但前面要加上`*`来表示它是一个指针变量，当然指针也是具有类型的，存储不同类型的变量地址也要用对应的指针类型

```c
int *p;
```

通过`&`运算符就可以取出某个变量的地址

```c
int *p;
int a = 3;
p = &a; // 取出变量 a 的地址交给指针p
```

指针的赋值必须是一个地址，所以数组名、带地址运算符`&`的变量名、另一个指针都可以赋值

::: tip
& 运算符的操作数必须是变量，取出来的地址大小取决于编译器和系统架构
:::

指针和变量一样有自己的地址和值，对指针而言，`&`会给出指针本身的地址，而`*`会得到指针指向地址上的值

```c
int a = 3;
int *p = &a;
printf("%d", *p); // 3 通过指针访问上述 code 中变量存储的数据
printf("%d", a);  // 3 它和指针访问是等效的
```

::: tip
定义变量时的`*`和表达式中的`*`是不同的
:::

## 指针的运算

指针变量的运算实际上是地址的运算，指针加`1`指的是增加一个存储单元，整数会与指针类型字节相乘，然后把结果和初始值相加，就得到了下一个地址

当然也可以减去一个整数，也是初始值减去整数和指针类型的乘积

指针也可以和指针之间也可以进行计算

简单来说指针的值以所执行的对象大小为单位进行改变

## 数组与指针

数组本身就表达地址，因此数组的地址不需要用`&`取出，但数组的元素表达的是变量，需要使用取地址符

因此`[]`运算符可以对数组变量做，也可以对指针变量做

如果把一个数组当作参数传递给一个函数，这个函数接收的也是一个指针，所以要定义指针变量接收

```c
int foo(int *arr){
  return 0;
}
int main(){
  int arr[3] = {1, 2, 3};
  int *p;
  p = arr; // 数组名即指针地址
  foo(arr); // 接收数组时，需要在函数中定义指针变量接收
  return 0;
}
```

## 字符串与指针

字符串传递的都是首字符的地址
