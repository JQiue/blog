---
title: 走进计算机体系
category: 计算机基础
author: JQiue
---

## 第一台通用计算机的诞生

ENIAC 是 1946 年在美国宾夕法尼亚大学制成的，但实际上真正意义上的第一台计算机是阿塔纳索夫-贝瑞计算机，ENIAC 发明者是从阿塔纳索夫继承了电子数字计算机的主要设计构想，因此阿塔纳索夫-贝瑞计算机是世界上第一台计算机，而 ENIAC 是通用的第一台电子数字计算机，因为 ENIAC 是可编程的计算机

<div align="center"><img src="https://gitee.com/jqiue/img_upload/raw/master/images/firstcomputer.jpg"/></div>

从使用器件的角度来看，计算机的发展经历了五代的变化

+ 1946~1957 年，**电子管计算机**，集成度小，空间占用大，功耗高，运行速度慢，操作复杂，更换程序需要接线

+ 1958~1964 年，**晶体管计算机**，集成度相对电子管较高，空间占用小，功耗相对较低，运行速度较快，操场相对简单，交互更加方便

+ 1965~1980 年，**集成电路与大规模集成电路计算机**，计算机变得更小，功耗变得更低，计算速度更快，这个时候计算机具备了进入千家万户的条件，开始有了操作系统的诞生

+ 1981年至今，**超大规模集成电路计算机**，一个芯片集成了上百万的晶体管，速度更快，体积更小，价格更低，用途丰富，更能被大众接受

+ 第五个阶段：**未来的计算机**，以蛋白质分子作为主要原材料的生物计算机，具有生物级别的自动修复，不受信号干扰，以及遵循量子力学的量子计算机

::: tip 量子计算机
2013 年 5 月，谷歌和 NASA 发布 D-Wave Two，2017 年 5 月，中国科学院制造出光量子计算机，2019 年 1 月，IBM 展示了世界首款商业化量子计算机，包括一些企业也开始了研究，腾讯组建了量子实验室，阿里巴巴成立了达摩院。量子计算机使用了“量子比特”（qubit）来替代了 1 和 0 的数字比特，甚至是 0 和 1 的叠加态
:::

## 计算机的分类

计算机分为两大类：

1. 电子模拟计算机：类似于“模拟”的方式，比如时钟用指针在表盘上转动来表示时间，电表用角度来表示电量大小
2. 电子数字计算机：它是用数字来表示数量的大小，主要的特点是按位运算，并且不连续地跳动计算。

模拟计算机是通过电压来表示数据，并用盘上连线控制，它的精度较低，存储量较小，没有逻辑判断能力，而数字计算机通过数字 0 和 1 表示，并通过程序来控制，它的精度非常高，存储量非常大，逻辑判断能力也非常强

电子数字计算机是现在最主流的计算机，通常也被称为电脑或者电子计算机，且可以进一步分为专用计算机和通用计算机，**它们是根据计算机的效率、速度、价格、运行的经济性和适应性来划分的**

专业计算机是最有效，最经济和最快速的计算机，但是他的适应性很差，通用计算机适应性很强，但是牺牲了效率，速度和经济型，通用计算机又可以分为超级计算机，大型机，服务器，PC 机，单片机和多核机，他们的区别在于体积，简易性，功耗，性能，数据存储容量，指令系统规模和机器价格

<div align="center"><img src="https://gitee.com/jqiue/img_upload/raw/master/images/计算机1.1.png"/></div>

### 个人计算机

通常对个人用户来讲提供良好的性能，且价格低廉

### 服务器

服务器用于为多用户运行大型程序的计算机，执行大负载任务，通常是多个用户并行访问，提供比个人计算机更强的性能以及更加可靠的稳定性。低端服务器一般用于商务应用或者 Web 服务，而高端服务器又叫做**超级计算机**，常用于科学计算，这类计算机代表着最高价格以及最高的计算性能，但在整个计算机市场中占用的比例较少，跟个人计算机比起来，当前民用最强 CPU 连超算的十分之一都赶不上，可谓差距之大，对于超级计算机也是有一个算力排名的：

名字|制造商|处理器|峰值速度
---|---|---|---
富岳|日本|7299072|513,854.7 Tflops/s
顶点|美国|2414592|200,794.9 Tflops/s
Sierra|美国|1572480|125,712.0 Tflops/s
神威太湖之光|中国|10649600|125,435.9 Tflops/s
天河2号|中国|4981760|100,678.7 Tflops/s

> 资料来源：<https://zh.wikipedia.org/wiki/TOP500>

### 嵌入式计算机

嵌入式计算机是数量最多的一类，常用于汽车，电视、控制飞机等设备的处理器，它的设计目标是运行单一的应用程序，对成本和功耗有严格限制，必须快速的执行有限功能，且必须保证正常运转

## 计算机系统中的 8 个思想

这些思想贯穿了整个计算机的设计

+ 摩尔定律：单芯片上的集成度每 18 ~ 24 个月翻一番
+ 抽象简化：抽象简化提高硬件的生产效率
+ 加速大概率事件：提高一些经常发生的事件处理效率
+ 通过并行提高性能：同时执行多个任务
+ 通过流水线提高性能：特殊的并行场景
+ 通过预测提高性能：通过一些代价不高的执行来提前开始某些操作
+ 存储器层次：速度影响性能，容量限制问题的规模，将较快的存储器放在顶层解决速度，将速度慢，容量大的存储器放在底层解决容量
+ 通过冗余提高可靠性：物理器件可能会失效，使用冗余部件提高系统的可靠性，用双轮胎卡车理解（其中一个轮胎出问题时，也可以工作）

## 程序概念

众所周知，计算机的硬件只能执行简单的低级指令，一个复杂的应用程序到简单的指令需要经过多个软件层次来将高层次的操作翻译成简单的低级指令，这是一种抽象的解释。在层次中，最外层是应用软件，中间是硬件，而系统软件在两者之间

### 系统软件

系统软件提供操作系统、编译程序、加载程序、汇编程序等，对于现代计算机系统来说，**操作系统**和**编译程序**是必须的。

操作系统是用户程序和硬件之间的接口，提供了基本的输入和输出，分配内外存，为应用程序提供计算机资源的操作

编译程序用于将高级语言编写的程序翻译成硬件能够执行的指令，对于计算机来说最简单的信号是“通”和”断“，所以计算机用两个符号 0 和 1 表示。也因此计算机的语言通常被称之为**二进制数**，每个符号就是一个**二进制位**或**一位**（bit），而计算机指令就是一个个二进制位组成的位串。

### 转向高级语言

最初程序员是通过二进制来和计算机打交道的，由于二进制太过难以理解，它们很快发明了助记符，最初助记符是手工翻译成二进制，后来开发了一种**汇编程序**，将助记符自动翻译成对应的二进制，这种符号语言又叫**汇编语言**，而计算机理解的二进制语言叫**机器语言**。

后来人们意识到可以编写一个能够将接近人类语言翻译成计算机指令的程序，于是就设计了高级语言的编译程序，使用高级编程语言大大提高了软件的开发效率，这些高级语言由一些单词和代数符号组成，可以由编译器转换成汇编语言，再由汇编器转换成机器语言交给计算机执行

## 硬件概念

组成计算机的经典部件是输入、输出、存储器、数据通路（也叫运算器）和控制器，后两个部件通常合称为处理器

### 输入

常见的输入设备有：键盘、鼠标、扫描仪、触摸板、触摸屏等，它们将用户的指令发送给计算机

### 输出

常见的输出设备有：显示器，打印机，音响等，他们将计算机的处理结果发送给用户

### 存储器

能够长期的记忆程序、数据、中间结果以及最终运算结果的设备

### 处理器

处理器是计算机中的最活跃的部分，能够处理数据，并按结果发出控制信号使 I/O 设备动作等，运算器使处理器中执行运算操作的部分，控制器根据程序的指令指挥运算器、存储器和 I/O 设备

## 计算机的体系与结构

### 冯诺依曼体系

冯诺依曼体系结构即**将程序指令和数据一起存储的计算机设计概念结构**，早期计算机只能运行固定用途的程序，改变程序必须更改结构，重新设计电路，在当时重启程序并不像现在重新编译一样简单，这就导致计算机非常局限，于是冯诺依曼提出了将程序存储起来，并设计通用的电路，运行程序的时候，把程序当成电路能够理解的语言，然后让通用电路执行相关的逻辑，这就是冯诺依曼体系的核心概念：**存储程序指令，并设计通用电路**

### 现代计算机结构

现代计算机结构从本质上来讲还是冯诺依曼结构，但是对原有的结构进行了改变来解决冯诺依曼原有结构 CPU 和存储设备之间的性能差异，在这个结构中，存储器，运算器，控制器在一个结构上面，现在计算机的结构可以理解为**以存储器为核心的结构**

## 计算机的性能

对于计算机来说，如何评价它的性能是很重要的，但是现代计算机采用了大量先进的性能改进方法，使性能评价极为困难

### 性能的定义

如果在两台计算机中运行同一个程序，可以认为首先完成的那台计算机更快，如果是服务器，则应该是完成量最多的那台计算机更快。个人计算机强调响应时间，服务器则强调吞吐率。因此对于不同的计算机来说，应该采用不同的性能度量标准

::: tip 响应时间 && 吞吐率

+ 响应时间：指计算机完成某个任务的总时间
+ 吞吐率：指单位时间内完成的任务数量
:::

一般将处理器更换为更高速的型号既会减少响应时间也会增加吞吐率，但只增加处理器数量只会增加吞吐率，所以评价计算机性能主要考虑响应时间

### 性能的度量

对于计算机来说都可以用时钟来驱动硬件中发生的各种事件，时钟间隔的时间称为时钟周期，它的倒数称之为时钟频率

### CPU 性能及其因素

性能的度量实际上是针对 CPU 的执行时间，下面是一个简单公式：

::: center
一个程序的 CPU 执行时间 = 一个程序的 CPU 时钟周期数 * 时钟周期时间
:::

由于时钟频率和时钟周期互为倒数，即可得：

::: center
一个程序的 CPU 执行时间 = 一个程序的 CPU 时钟周期数 / 时钟频率
:::

### 指令的性能

由于计算机是通过执行指令来运行程序的，所以执行时间依赖于程序中的指令数，因此一个程序需要的时钟周期可为：

::: center
CPU 时钟周期数 = 程序的指令数 * 每条指令的平均时钟周期数
:::

通常使用 CPI（clock cycle per instruction）表示执行每条指令所需的时钟周期数的平均值，不同的指令需要的时间可能不同，CPI 是一个程序全部指令所用时钟周期的平均值，现在可用指令数、CPI 和时钟周期时间来写出基本的性能公式：

::: center
CPU 时间 = 指令数 * CPI * 时钟周期时间  
or  
CPU 时间 = 指令数 * CPI / 时钟频率
:::

也有一种用 MIPS 取代时间以度量性能的方法：

::: center
MIPS = 指令数 / (执行时间 * 10^6^)
:::

从表面上来看 MIPS 既容易理解，又符合人的直觉，但用 MIPS 作为指标存在几个问题，这导致 MIPS 的变化是与性能无关的

## 从单处理器向多处理器转变

由于 CPU 的发展，CPU 的功耗达到了极致，再也无法将处理器冷却下来，迫使处理器的设计发生了巨大的改变，芯片制造商开始在单片中加入多个处理器，以求更大的吞吐率，而不再追求降低单个程序运行在单个处理器的响应时间

## 计算机的计算单位

### 容量单位

bit|Byte|KB|MB|GB|TB|PB|EB
---|---|---|---|---|---|---|---
比特位|字节|千字节|兆字节|吉字节|太字节|拍字节|艾字节
-|8bits|1024B|1024KB|1024MB|1024GB|1024TB|1024EB
门电路|-|寄存器|高速缓存|内存/硬盘|硬盘|云硬盘|数据仓库

::: warning
在千字节之后，所有的单位的换算关系都是 1024，只有字节和比特位使用的是 8 进制位，同时 1024 = 2^10^
:::

::: danger 为什么网上买的硬盘容量标称 500G，格式化之后变成了 465G？
这是因为硬盘制造商使用的是 10 进制位来标记容量，也就是说 1G 等于1000MB，而不是 1024MB，所以(500 * 1000^3^)/1024^3^ 约等于 465G，硬盘商使用 1000 进制位，则是因为硬盘的扇区，也就是存储数据的地方，在记住这个扇区的容量时，使用的是人类容易理解的十进制，更容易去沟通和协商
:::

### 速度单位

+ 网络速度

在互联网走进千家万户的同时，会经常听到各种 2M、4M、以及 10M 这样的关键字，这里的单位并不是存储单位，而是一种速度单位。

::: danger 为什么电信拉的 100M 光纤，测试峰值速度只有 12M 每秒？
在网络中常用速度单位为：Mbps，100M 是 100Mbps 的缩写，而 100Mbps 等于 100Mbit/s，所以换算成实际的速度单位为：100Mbit/s = (100/8)MB/s = 12.5MB/s
:::

## 字符与编码集

### ASCII 码

7 个 bits 就可以完全表示 ASCII 码，其中包括 95 个可打印字符，33 个不可打印字符（包括控制字符）：

::: center
33 + 95 = 128 = 2^7^
:::

::: warning 缺陷
ASCII 的局限在于只能显示 26 个基本拉丁字母、阿拉伯数字和英式标点符号，因此只能用于显示现代美国英语，对其他语言依然无能为力
:::

### ASCII 码的扩展性

随着时间的发展，ASCII 码逐渐的满足不了更多的需求了，主要表现在很多应用或者国家中的符号都无法表示，这时就对 ASCII 码进行了第一次扩充，将 7bits 增加到 8bits，就可以让 ASCII 码表示 256 个字符，于是产生了可扩展的 ASCII 码

### 字符编码集的国际化

在世界上，很多语言的体系都不一样，很多都是不以有限字符组合的语言，比如英文只用 26 个英文字母表示，而中文除了偏旁以外，每一个字都是独立的，这些字符尤以中国、韩国、日本等国家的语言最为复杂，所以字符编码集的国际化非常有必要

#### 中文编码集

+ GB2312：又叫《信息交换用汉字编码字符集——基本集》，一共收录了 7445 个字符，包括 6763 个汉字和 682 个其他符号，虽然 GB2312 算是一个比较完备的中文字符集，但是并不符合国际标准
+ GBK：又叫《汉字内码扩展规范》，向下兼容 GB2312，向上支持国际 ISO 标准，收录了 21003 个汉字，支持中日韩全部字符

不管中文编码如何完善，只是一个本地化的编码，跨国使用都会出现乱码现象

### Unicode

又被称为统一码，万国码，单一码，从字面意思来看，Unicode 可以表示全世界所有的字符，Unicode 定义了世界通用的符号集，UTF-* 实现了编码，UTF-8 以字节为单位对 Unicode 进行编码

::: tip
在中国的 Windows 系统是默认使用 GBK 编码，编程时必须注意这个问题
:::
